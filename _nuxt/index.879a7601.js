import{d as b,c as S,k as h,l as m,z as u,A as j,t as v,B as D,x as E,y as T,m as n,_ as z,r as $,C as L,D as G,F as B,E as F,q as y,G as A,H as R,I as V}from"./entry.e9034831.js";const I=g=>(E("data-v-7a7ab6d5"),g=g(),T(),g),x={key:0},H=I(()=>n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-emoji-expressionless-fill",viewBox:"0 0 16 16"},[n("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM4.5 6h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm5 0h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm-5 4h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1z"})],-1)),U=[H],W={key:1},q={key:0},J={key:2,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-flag-fill flagged",viewBox:"0 0 16 16"},K=I(()=>n("path",{d:"M14.778.085A.5.5 0 0 1 15 .5V8a.5.5 0 0 1-.314.464L14.5 8l.186.464-.003.001-.006.003-.023.009a12.435 12.435 0 0 1-.397.15c-.264.095-.631.223-1.047.35-.816.252-1.879.523-2.71.523-.847 0-1.548-.28-2.158-.525l-.028-.01C7.68 8.71 7.14 8.5 6.5 8.5c-.7 0-1.638.23-2.437.477A19.626 19.626 0 0 0 3 9.342V15.5a.5.5 0 0 1-1 0V.5a.5.5 0 0 1 1 0v.282c.226-.079.496-.17.79-.26C4.606.272 5.67 0 6.5 0c.84 0 1.524.277 2.121.519l.043.018C9.286.788 9.828 1 10.5 1c.7 0 1.638-.23 2.437-.477a19.587 19.587 0 0 0 1.349-.476l.019-.007.004-.002h.001"},null,-1)),O=[K],P={key:3,class:"unrevealed"},Q=b({__name:"GameCell",props:{cell:{},x:{},y:{},bombed:{type:Boolean},boardState:{}},setup(g){const t=g,e=S(()=>t.cell.minesAround(t.boardState,t.x,t.y)),s=S(()=>{switch(e.value){case 1:return"cyan";case 2:return"green";default:return"red"}});return(a,c)=>(h(),m("div",{class:D(a.cell.isFlagged&&!a.cell.isRevealed()&&!a.bombed?"flagged":"")},[a.bombed&&a.cell.hasMine?(h(),m("div",x,U)):a.cell.isRevealed()?(h(),m("div",W,[u(e)===0?(h(),m("p",q)):(h(),m("p",{key:1,style:j(`color: ${u(s)}`)},v(u(e)),5))])):a.cell.isFlagged?(h(),m("svg",J,O)):(h(),m("div",P))],2))}});const X=z(Q,[["__scopeId","data-v-7a7ab6d5"]]);class p{constructor(t,e=!1,s=!1){p.prototype.__init.call(this),p.prototype.__init2.call(this),p.prototype.__init3.call(this),p.prototype.__init4.call(this),p.prototype.__init5.call(this),this.hasMine=t,this.isFlagged=e,this.revealed=s}__init(){this.isRevealed=()=>this.revealed}__init2(){this.reveal=()=>this.revealed=!0}__init3(){this.setFlag=(t=!0)=>this.isFlagged=t}__init4(){this.swapFlag=()=>this.setFlag(!this.isFlagged)}__init5(){this.minesAround=(t,e,s)=>{let a=0;const c=e>0,_=e+1<t.length,l=s>0,w=s+1<t[e].length;return c&&t[e-1][s].hasMine&&a++,_&&t[e+1][s].hasMine&&a++,l&&t[e][s-1].hasMine&&a++,w&&t[e][s+1].hasMine&&a++,c&&l&&t[e-1][s-1].hasMine&&a++,c&&w&&t[e-1][s+1].hasMine&&a++,_&&l&&t[e+1][s-1].hasMine&&a++,_&&w&&t[e+1][s+1].hasMine&&a++,a}}static __initStatic(){this.CreateMine=()=>new p(!0)}static __initStatic2(){this.CreateEmpty=()=>new p(!1)}}p.__initStatic();p.__initStatic2();class C{constructor(t,e,s=Math.ceil(10*(e*t)/100)){C.prototype.__init.call(this),this.width=t,this.height=e,this.mines=s,this.board=[];for(let c=0;c<t;c++){const _=[];for(let l=0;l<e;l++)_.push(p.CreateEmpty());this.board.push(_)}const a=[];do{const c=Math.floor(Math.random()*t),_=Math.floor(Math.random()*e);a.some(([l,w])=>l===c&&w===_)||(a.push([c,_]),this.board[c][_]=p.CreateMine())}while(a.length<s)}__init(){this.getBoard=()=>this.board}}class M{constructor(t,e){M.prototype.__init.call(this),this.board=new C(t,e)}__init(){this.getBoard=()=>this.board}}const Y={class:"flex justify-center content-center flex-col gap-4"},Z={key:0},ee={class:"text-center"},te={class:"flex justify-center content-center"},se={class:"map"},ae=["onClick","onAuxclick"],oe={key:1,class:"flex justify-center content-center"},ne=b({__name:"Game",props:{game:{}},setup(g){const t=g,e=$(!1),s=$(t.game.getBoard().getBoard()),a=L(()=>s.value.some(r=>r.some(o=>!o.hasMine&&!o.isRevealed()))),c=(r,o)=>{if(e.value||!a)return;const i=s.value;s.value=[...l(i,r,o)]},_=(r,o)=>{if(e.value||!a)return;const i=s.value,f=i[r][o];f.isRevealed()||(f.swapFlag(),i[r][o]=f,s.value=[...i])},l=(r,o,i)=>{if(o<0||i<0||o>=r.length||i>=r[o].length||r[o][i].isRevealed())return r;const f=r[o][i];if(f.hasMine)return e.value=!0,r;if(f.reveal(),f.minesAround(r,o,i)===0){let d=[...r];d=l(d,o-1,i+1),d=l(d,o+1,i+1),d=l(d,o-1,i-1),d=l(d,o+1,i-1),d=l(d,o,i+1),d=l(d,o,i-1),d=l(d,o+1,i),d=l(d,o-1,i)}return r[o][i]=f,r},w=()=>{e.value=!1,s.value=new M(t.game.getBoard().getBoard().length,t.game.getBoard().getBoard()[0].length).getBoard().getBoard()};return(r,o)=>{const i=X;return h(),m("div",Y,[u(a)()?G("",!0):(h(),m("div",Z,[n("h1",ee,v(r.$t("game.endgame.Win")),1)])),n("div",te,[n("table",se,[(h(!0),m(B,null,F(u(s),(f,d)=>(h(),m("tr",null,[(h(!0),m(B,null,F(f,(N,k)=>(h(),m("td",{onClick:()=>c(d,k),onAuxclick:()=>_(d,k)},[y(i,{x:d,y:k,cell:N,boardState:u(s),bombed:u(e)},null,8,["x","y","cell","boardState","bombed"])],40,ae))),256))]))),256))])]),u(e)||!u(a)()?(h(),m("div",oe,[n("button",{onClick:w,class:"btn btn-primary"},v(r.$t("game.endgame.Restart")),1)])):G("",!0)])}}});const le=z(ne,[["__scopeId","data-v-d6d3d16d"]]),ie={id:"new_game_modal",class:"modal modal-bottom sm:modal-middle"},ce={method:"dialog",class:"modal-box flex flex-col gap-4"},re={class:"font-bold text-lg"},de={class:"flex flex-col gap-4"},_e={class:"flex gap-4"},he=["placeholder"],me=["placeholder"],ue={class:"w-full"},pe=n("form",{method:"dialog",class:"modal-backdrop"},[n("button",null,"close")],-1),ge=b({__name:"NewGameModal",props:{setGame:{type:Function}},setup(g){const t=g,e=$(10),s=$(10),a=()=>{t.setGame(new M(e.value,s.value))};return(c,_)=>(h(),m("dialog",ie,[n("div",ce,[n("h3",re,v(c.$t("main-page.new-game-modal.Title")),1),n("div",null,[n("div",de,[n("div",_e,[A(n("input",{type:"number","onUpdate:modelValue":_[0]||(_[0]=l=>V(s)?s.value=l:null),placeholder:c.$t("main-page.new-game-modal.form.Height"),class:"input input-bordered w-full max-w-xs"},null,8,he),[[R,u(s)]]),A(n("input",{type:"number","onUpdate:modelValue":_[1]||(_[1]=l=>V(e)?e.value=l:null),placeholder:c.$t("main-page.new-game-modal.form.Width"),class:"input input-bordered w-full max-w-xs"},null,8,me),[[R,u(e)]])]),n("div",ue,[n("button",{onClick:a,class:"btn btn-primary w-full"},v(c.$t("main-page.new-game-modal.form.Start")),1)])])])]),pe]))}}),fe={key:0,class:"h-full"},ve={key:1,class:"h-full"},we={class:"hero bg-base-200 h-full"},$e={class:"hero-content text-center"},be={class:"max-w-md"},Me={class:"text-5xl font-bold"},ke={class:"py-6"},ye={onclick:"new_game_modal.showModal()",class:"btn btn-primary"},Se=b({__name:"index",setup(g){const t=$();return(e,s)=>{const a=le,c=ge;return u(t)?(h(),m("div",fe,[y(a,{game:u(t)},null,8,["game"])])):(h(),m("div",ve,[y(c,{setGame:_=>t.value=_},null,8,["setGame"]),n("div",we,[n("div",$e,[n("div",be,[n("h1",Me,v(e.$t("main-page.intro-hero.Title")),1),n("p",ke,v(e.$t("main-page.intro-hero.Description")),1),n("button",ye,v(e.$t("main-page.intro-hero.New-game")),1)])])])]))}}});export{Se as default};
