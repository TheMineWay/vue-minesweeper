import{a as b,b as S,o as h,e as m,u,f as I,t as v,h as T,p as D,i as E,j as a,k as z,r as $,l as L,m as F,F as G,q as B,s as y,w as R,v as A,x as V}from"./entry.3486d040.js";const N=g=>(D("data-v-f5004cf6"),g=g(),E(),g),x={key:0},U=N(()=>a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-emoji-expressionless-fill",viewBox:"0 0 16 16"},[a("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM4.5 6h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm5 0h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm-5 4h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1z"})],-1)),W=[U],q={key:1},H={key:0},J={key:2,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-flag-fill flagged",viewBox:"0 0 16 16"},K=N(()=>a("path",{d:"M14.778.085A.5.5 0 0 1 15 .5V8a.5.5 0 0 1-.314.464L14.5 8l.186.464-.003.001-.006.003-.023.009a12.435 12.435 0 0 1-.397.15c-.264.095-.631.223-1.047.35-.816.252-1.879.523-2.71.523-.847 0-1.548-.28-2.158-.525l-.028-.01C7.68 8.71 7.14 8.5 6.5 8.5c-.7 0-1.638.23-2.437.477A19.626 19.626 0 0 0 3 9.342V15.5a.5.5 0 0 1-1 0V.5a.5.5 0 0 1 1 0v.282c.226-.079.496-.17.79-.26C4.606.272 5.67 0 6.5 0c.84 0 1.524.277 2.121.519l.043.018C9.286.788 9.828 1 10.5 1c.7 0 1.638-.23 2.437-.477a19.587 19.587 0 0 0 1.349-.476l.019-.007.004-.002h.001"},null,-1)),O=[K],P={key:3,class:"unrevealed"},Q=b({__name:"GameCell",props:{cell:{},x:{},y:{},bombed:{type:Boolean},boardState:{}},setup(g){const t=g,e=S(()=>t.cell.minesAround(t.boardState,t.x,t.y)),s=S(()=>{switch(e.value){case 1:return"cyan";case 2:return"green";default:return"red"}});return(o,c)=>(h(),m("div",{class:T(o.cell.isFlagged&&!o.cell.isRevealed()&&!o.bombed?"flagged":"")},[o.bombed&&o.cell.hasMine?(h(),m("div",x,W)):o.cell.isRevealed()?(h(),m("div",q,[u(e)===0?(h(),m("p",H)):(h(),m("p",{key:1,style:I(`color: ${u(s)}`)},v(u(e)),5))])):o.cell.isFlagged?(h(),m("svg",J,O)):(h(),m("div",P))],2))}});const X=z(Q,[["__scopeId","data-v-f5004cf6"]]);class p{constructor(t,e=!1,s=!1){p.prototype.__init.call(this),p.prototype.__init2.call(this),p.prototype.__init3.call(this),p.prototype.__init4.call(this),p.prototype.__init5.call(this),this.hasMine=t,this.isFlagged=e,this.revealed=s}__init(){this.isRevealed=()=>this.revealed}__init2(){this.reveal=()=>this.revealed=!0}__init3(){this.setFlag=(t=!0)=>this.isFlagged=t}__init4(){this.swapFlag=()=>this.setFlag(!this.isFlagged)}__init5(){this.minesAround=(t,e,s)=>{let o=0;const c=e>0,_=e+1<t.length,l=s>0,w=s+1<t[e].length;return c&&t[e-1][s].hasMine&&o++,_&&t[e+1][s].hasMine&&o++,l&&t[e][s-1].hasMine&&o++,w&&t[e][s+1].hasMine&&o++,c&&l&&t[e-1][s-1].hasMine&&o++,c&&w&&t[e-1][s+1].hasMine&&o++,_&&l&&t[e+1][s-1].hasMine&&o++,_&&w&&t[e+1][s+1].hasMine&&o++,o}}static __initStatic(){this.CreateMine=()=>new p(!0)}static __initStatic2(){this.CreateEmpty=()=>new p(!1)}}p.__initStatic();p.__initStatic2();class C{constructor(t,e,s=Math.ceil(10*(e*t)/100)){C.prototype.__init.call(this),this.width=t,this.height=e,this.mines=s,this.board=[];for(let c=0;c<t;c++){const _=[];for(let l=0;l<e;l++)_.push(p.CreateEmpty());this.board.push(_)}const o=[];do{const c=Math.floor(Math.random()*t),_=Math.floor(Math.random()*e);o.some(([l,w])=>l===c&&w===_)||(o.push([c,_]),this.board[c][_]=p.CreateMine())}while(o.length<s)}__init(){this.getBoard=()=>this.board}}class M{constructor(t,e){M.prototype.__init.call(this),this.board=new C(t,e)}__init(){this.getBoard=()=>this.board}}const Y={class:"flex justify-center content-center flex-col gap-4"},Z={key:0},ee={class:"text-center"},te={class:"flex justify-center content-center"},se={class:"map"},oe=["onClick","onAuxclick"],ne={key:1,class:"flex justify-center content-center"},ae=b({__name:"Game",props:{game:{}},setup(g){const t=g,e=$(!1),s=$(t.game.getBoard().getBoard()),o=L(()=>s.value.some(r=>r.some(n=>!n.hasMine&&!n.isRevealed()))),c=(r,n)=>{if(e.value||!o)return;const i=s.value;s.value=[...l(i,r,n)]},_=(r,n)=>{if(e.value||!o)return;const i=s.value,f=i[r][n];f.isRevealed()||(f.swapFlag(),i[r][n]=f,s.value=[...i])},l=(r,n,i)=>{if(n<0||i<0||n>=r.length||i>=r[n].length||r[n][i].isRevealed())return r;const f=r[n][i];if(f.hasMine)return e.value=!0,r;if(f.reveal(),f.minesAround(r,n,i)===0){let d=[...r];d=l(d,n-1,i+1),d=l(d,n+1,i+1),d=l(d,n-1,i-1),d=l(d,n+1,i-1),d=l(d,n,i+1),d=l(d,n,i-1),d=l(d,n+1,i),d=l(d,n-1,i)}return r[n][i]=f,r},w=()=>{e.value=!1,s.value=new M(t.game.getBoard().getBoard().length,t.game.getBoard().getBoard()[0].length).getBoard().getBoard()};return(r,n)=>{const i=X;return h(),m("div",Y,[u(o)()?F("",!0):(h(),m("div",Z,[a("h1",ee,v(r.$t("game.endgame.Win")),1)])),a("div",te,[a("table",se,[(h(!0),m(G,null,B(u(s),(f,d)=>(h(),m("tr",null,[(h(!0),m(G,null,B(f,(j,k)=>(h(),m("td",{onClick:()=>c(d,k),onAuxclick:()=>_(d,k)},[y(i,{x:d,y:k,cell:j,boardState:u(s),bombed:u(e)},null,8,["x","y","cell","boardState","bombed"])],40,oe))),256))]))),256))])]),u(e)||!u(o)()?(h(),m("div",ne,[a("button",{onClick:w,class:"btn btn-primary"},v(r.$t("game.endgame.Restart")),1)])):F("",!0)])}}});const le=z(ae,[["__scopeId","data-v-1ac29488"]]),ie={id:"new_game_modal",class:"modal modal-bottom sm:modal-middle"},ce={method:"dialog",class:"modal-box flex flex-col gap-4"},re={class:"font-bold text-lg"},de={class:"flex flex-col gap-4"},_e={class:"flex gap-4"},he=["placeholder"],me=["placeholder"],ue={class:"w-full"},pe=a("form",{method:"dialog",class:"modal-backdrop"},[a("button",null,"close")],-1),ge=b({__name:"NewGameModal",props:{setGame:{type:Function}},setup(g){const t=g,e=$(10),s=$(10),o=()=>{t.setGame(new M(e.value,s.value))};return(c,_)=>(h(),m("dialog",ie,[a("div",ce,[a("h3",re,v(c.$t("main-page.new-game-modal.Title")),1),a("div",null,[a("div",de,[a("div",_e,[R(a("input",{type:"number","onUpdate:modelValue":_[0]||(_[0]=l=>V(s)?s.value=l:null),placeholder:c.$t("main-page.new-game-modal.form.Height"),class:"input input-bordered w-full max-w-xs"},null,8,he),[[A,u(s)]]),R(a("input",{type:"number","onUpdate:modelValue":_[1]||(_[1]=l=>V(e)?e.value=l:null),placeholder:c.$t("main-page.new-game-modal.form.Width"),class:"input input-bordered w-full max-w-xs"},null,8,me),[[A,u(e)]])]),a("div",ue,[a("button",{onClick:o,class:"btn btn-primary w-full"},v(c.$t("main-page.new-game-modal.form.Start")),1)])])])]),pe]))}}),fe={key:0,class:"h-full"},ve={key:1,class:"h-full"},we={class:"hero bg-base-200 h-full"},$e={class:"hero-content text-center"},be={class:"max-w-md"},Me={class:"text-5xl font-bold"},ke={class:"py-6"},ye={onclick:"new_game_modal.showModal()",class:"btn btn-primary"},Se=b({__name:"index",setup(g){const t=$();return(e,s)=>{const o=le,c=ge;return u(t)?(h(),m("div",fe,[y(o,{game:u(t)},null,8,["game"])])):(h(),m("div",ve,[y(c,{setGame:_=>t.value=_},null,8,["setGame"]),a("div",we,[a("div",$e,[a("div",be,[a("h1",Me,v(e.$t("main-page.intro-hero.Title")),1),a("p",ke,v(e.$t("main-page.intro-hero.Description")),1),a("button",ye,v(e.$t("main-page.intro-hero.New-game")),1)])])])]))}}});export{Se as default};
