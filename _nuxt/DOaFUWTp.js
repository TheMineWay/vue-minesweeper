var L=Object.defineProperty;var T=(g,t,e)=>t in g?L(g,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):g[t]=e;var _=(g,t,e)=>T(g,typeof t!="symbol"?t+"":t,e);import{d as k,i as F,t as u,v as h,x as l,J as p,K as D,y as v,L as E,_ as z,r as $,M as I,N as G,O as R,P as A,z as B,Q as S,R as y,S as V}from"./BQdSwA4V.js";const U={key:0},W={key:1},H={key:0},J={key:2,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-flag-fill flagged",viewBox:"0 0 16 16"},K={key:3,class:"unrevealed"},O=k({__name:"GameCell",props:{cell:{},x:{},y:{},bombed:{type:Boolean},boardState:{}},setup(g){const t=g,e=F(()=>t.cell.minesAround(t.boardState,t.x,t.y)),s=F(()=>{switch(e.value){case 1:return"cyan";case 2:return"green";default:return"red"}});return(a,o)=>(u(),h("div",{class:E(a.cell.isFlagged&&!a.cell.isRevealed()&&!a.bombed?"flagged":"")},[a.bombed&&a.cell.hasMine?(u(),h("div",U,o[0]||(o[0]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-emoji-expressionless-fill",viewBox:"0 0 16 16"},[l("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM4.5 6h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm5 0h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm-5 4h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1z"})],-1)]))):a.cell.isRevealed()?(u(),h("div",W,[p(e)===0?(u(),h("p",H)):(u(),h("p",{key:1,style:D(`color: ${p(s)}`)},v(p(e)),5))])):a.cell.isFlagged?(u(),h("svg",J,o[1]||(o[1]=[l("path",{d:"M14.778.085A.5.5 0 0 1 15 .5V8a.5.5 0 0 1-.314.464L14.5 8l.186.464-.003.001-.006.003-.023.009a12.435 12.435 0 0 1-.397.15c-.264.095-.631.223-1.047.35-.816.252-1.879.523-2.71.523-.847 0-1.548-.28-2.158-.525l-.028-.01C7.68 8.71 7.14 8.5 6.5 8.5c-.7 0-1.638.23-2.437.477A19.626 19.626 0 0 0 3 9.342V15.5a.5.5 0 0 1-1 0V.5a.5.5 0 0 1 1 0v.282c.226-.079.496-.17.79-.26C4.606.272 5.67 0 6.5 0c.84 0 1.524.277 2.121.519l.043.018C9.286.788 9.828 1 10.5 1c.7 0 1.638-.23 2.437-.477a19.587 19.587 0 0 0 1.349-.476l.019-.007.004-.002h.001"},null,-1)]))):(u(),h("div",K))],2))}}),P=z(O,[["__scopeId","data-v-7a7ab6d5"]]),b=class b{constructor(t,e=!1,s=!1){_(this,"isRevealed",()=>this.revealed);_(this,"reveal",()=>this.revealed=!0);_(this,"setFlag",(t=!0)=>this.isFlagged=t);_(this,"swapFlag",()=>this.setFlag(!this.isFlagged));_(this,"minesAround",(t,e,s)=>{let a=0;const o=e>0,c=e+1<t.length,i=s>0,w=s+1<t[e].length;return o&&t[e-1][s].hasMine&&a++,c&&t[e+1][s].hasMine&&a++,i&&t[e][s-1].hasMine&&a++,w&&t[e][s+1].hasMine&&a++,o&&i&&t[e-1][s-1].hasMine&&a++,o&&w&&t[e-1][s+1].hasMine&&a++,c&&i&&t[e+1][s-1].hasMine&&a++,c&&w&&t[e+1][s+1].hasMine&&a++,a});this.hasMine=t,this.isFlagged=e,this.revealed=s}};_(b,"CreateMine",()=>new b(!0)),_(b,"CreateEmpty",()=>new b(!1));let M=b;class Q{constructor(t,e,s=Math.ceil(10*(e*t)/100)){_(this,"board");_(this,"getBoard",()=>this.board);this.width=t,this.height=e,this.mines=s,this.board=[];for(let o=0;o<t;o++){const c=[];for(let i=0;i<e;i++)c.push(M.CreateEmpty());this.board.push(c)}const a=[];do{const o=Math.floor(Math.random()*t),c=Math.floor(Math.random()*e);a.some(([i,w])=>i===o&&w===c)||(a.push([o,c]),this.board[o][c]=M.CreateMine())}while(a.length<s)}}class N{constructor(t,e){_(this,"board");_(this,"getBoard",()=>this.board);this.board=new Q(t,e)}}const q={class:"flex justify-center content-center flex-col gap-4"},x={key:0},X={class:"text-center"},Y={class:"flex justify-center content-center"},Z={class:"map"},ee=["onClick","onAuxclick"],te={key:1,class:"flex justify-center content-center"},se=k({__name:"Game",props:{game:{}},setup(g){const t=g,e=$(!1),s=$(t.game.getBoard().getBoard()),a=I(()=>s.value.some(d=>d.some(n=>!n.hasMine&&!n.isRevealed()))),o=(d,n)=>{if(e.value||!a)return;const r=s.value;s.value=[...i(r,d,n)]},c=(d,n)=>{if(e.value||!a)return;const r=s.value,f=r[d][n];f.isRevealed()||(f.swapFlag(),r[d][n]=f,s.value=[...r])},i=(d,n,r)=>{if(n<0||r<0||n>=d.length||r>=d[n].length||d[n][r].isRevealed())return d;const f=d[n][r];if(f.hasMine)return e.value=!0,d;if(f.reveal(),f.minesAround(d,n,r)===0){let m=[...d];m=i(m,n-1,r+1),m=i(m,n+1,r+1),m=i(m,n-1,r-1),m=i(m,n+1,r-1),m=i(m,n,r+1),m=i(m,n,r-1),m=i(m,n+1,r),m=i(m,n-1,r)}return d[n][r]=f,d},w=()=>{e.value=!1,s.value=new N(t.game.getBoard().getBoard().length,t.game.getBoard().getBoard()[0].length).getBoard().getBoard()};return(d,n)=>{const r=P;return u(),h("div",q,[p(a)()?G("",!0):(u(),h("div",x,[l("h1",X,v(d.$t("game.endgame.Win")),1)])),l("div",Y,[l("table",Z,[(u(!0),h(R,null,A(p(s),(f,m)=>(u(),h("tr",null,[(u(!0),h(R,null,A(f,(j,C)=>(u(),h("td",{onClick:()=>o(m,C),onAuxclick:()=>c(m,C)},[B(r,{x:m,y:C,cell:j,boardState:p(s),bombed:p(e)},null,8,["x","y","cell","boardState","bombed"])],40,ee))),256))]))),256))])]),p(e)||!p(a)()?(u(),h("div",te,[l("button",{onClick:w,class:"btn btn-primary"},v(d.$t("game.endgame.Restart")),1)])):G("",!0)])}}}),ae=z(se,[["__scopeId","data-v-d6d3d16d"]]),oe={id:"new_game_modal",class:"modal modal-bottom sm:modal-middle"},ne={method:"dialog",class:"modal-box flex flex-col gap-4"},le={class:"font-bold text-lg"},ie={class:"flex flex-col gap-4"},re={class:"flex gap-4"},ce=["placeholder"],de=["placeholder"],me={class:"w-full"},ue=k({__name:"NewGameModal",props:{setGame:{type:Function}},setup(g){const t=g,e=$(10),s=$(10),a=()=>{t.setGame(new N(e.value,s.value))};return(o,c)=>(u(),h("dialog",oe,[l("div",ne,[l("h3",le,v(o.$t("main-page.new-game-modal.Title")),1),l("div",null,[l("div",ie,[l("div",re,[S(l("input",{type:"number","onUpdate:modelValue":c[0]||(c[0]=i=>V(s)?s.value=i:null),placeholder:o.$t("main-page.new-game-modal.form.Height"),class:"input input-bordered w-full max-w-xs"},null,8,ce),[[y,p(s)]]),S(l("input",{type:"number","onUpdate:modelValue":c[1]||(c[1]=i=>V(e)?e.value=i:null),placeholder:o.$t("main-page.new-game-modal.form.Width"),class:"input input-bordered w-full max-w-xs"},null,8,de),[[y,p(e)]])]),l("div",me,[l("button",{onClick:a,class:"btn btn-primary w-full"},v(o.$t("main-page.new-game-modal.form.Start")),1)])])])]),c[2]||(c[2]=l("form",{method:"dialog",class:"modal-backdrop"},[l("button",null,"close")],-1))]))}}),he={key:0,class:"h-full"},ge={key:1,class:"h-full"},pe={class:"hero bg-base-200 h-full"},_e={class:"hero-content text-center"},fe={class:"max-w-md"},ve={class:"text-5xl font-bold"},we={class:"py-6"},be={onclick:"new_game_modal.showModal()",class:"btn btn-primary"},ke=k({__name:"index",setup(g){const t=$();return(e,s)=>{const a=ae,o=ue;return p(t)?(u(),h("div",he,[B(a,{game:p(t)},null,8,["game"])])):(u(),h("div",ge,[B(o,{setGame:c=>t.value=c},null,8,["setGame"]),l("div",pe,[l("div",_e,[l("div",fe,[l("h1",ve,v(e.$t("main-page.intro-hero.Title")),1),l("p",we,v(e.$t("main-page.intro-hero.Description")),1),l("button",be,v(e.$t("main-page.intro-hero.New-game")),1)])])])]))}}});export{ke as default};
